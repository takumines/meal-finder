# MealFinder (é£Ÿäº‹æ±ºå®šã‚¢ãƒ—ãƒª)

## æ¦‚è¦

MealFinderã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã¨çŠ¶æ³ã«åŸºã¥ã„ã¦AIãŒæœ€é©ãªé£Ÿäº‹ã‚’æ¨è–¦ã™ã‚‹Next.js 15ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚è³ªå•ãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªä½“é¨“ã‚’é€šã˜ã¦ã€ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸé£Ÿäº‹ææ¡ˆã‚’æä¾›ã—ã¾ã™ã€‚

## ä¸»è¦æ©Ÿèƒ½

- ğŸ¤– **AIé§†å‹•ã®è³ªå•ç”Ÿæˆ**: OpenAI GPT-4ã‚’ä½¿ç”¨ã—ãŸå‹•çš„è³ªå•ã‚·ã‚¹ãƒ†ãƒ 
- ğŸ½ï¸ **ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸé£Ÿäº‹æ¨è–¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã€ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã€äºˆç®—ã«åŸºã¥ãæ¨è–¦
- ğŸ“± **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–UI**: ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆTailwind CSSï¼‰
- ğŸ” **èªè¨¼ã‚·ã‚¹ãƒ†ãƒ **: Supabaseèªè¨¼çµ±åˆ
- ğŸ“Š **é£Ÿäº‹å±¥æ­´ç®¡ç†**: éå»ã®æ¨è–¦ã¨è©•ä¾¡ã®è¿½è·¡
- âš¡ **é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: 2ç§’ä»¥å†…ã®APIãƒ¬ã‚¹ãƒãƒ³ã‚¹

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Next.js 15** (App Router)
- **React 18** with TypeScript
- **Tailwind CSS** (ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°)
- **é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°** (ç´”ç²‹é–¢æ•°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Next.js API Routes** (App Router)
- **Supabase** (PostgreSQL Database)
- **Prisma ORM** (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹)
- **OpenAI API** (GPT-4 for AIæ©Ÿèƒ½)

### é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ
- **TypeScript** (å‹å®‰å…¨æ€§)
- **Vitest** (ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯)
- **React Testing Library** (ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ)
- **ESLint & Prettier** (ã‚³ãƒ¼ãƒ‰å“è³ª)

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
src/
â”œâ”€â”€ app/                    # Next.js 15 App Router
â”‚   â”œâ”€â”€ api/               # API route handlers
â”‚   â”œâ”€â”€ page.tsx           # Pages
â”‚   â””â”€â”€ layout.tsx         # Layout components
â”œâ”€â”€ features/              # æ©Ÿèƒ½åˆ¥ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ auth/             # èªè¨¼æ©Ÿèƒ½
â”‚   â”œâ”€â”€ questions/        # è³ªå•ç”Ÿæˆãƒ»ç®¡ç†
â”‚   â””â”€â”€ meals/            # é£Ÿäº‹æ¨è–¦ãƒ»å±¥æ­´
â”œâ”€â”€ components/           # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ lib/                  # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ©ãƒƒãƒ‘ãƒ¼
â”‚   â”œâ”€â”€ supabase/        # Supabaseè¨­å®š
â”‚   â”œâ”€â”€ openai/          # OpenAIè¨­å®š
â”‚   â””â”€â”€ prisma/          # Prismaè¨­å®š
â”œâ”€â”€ types/               # TypeScriptå‹å®šç¾©
â””â”€â”€ __tests__/          # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ unit/           # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
    â”œâ”€â”€ contract/       # å¥‘ç´„ãƒ†ã‚¹ãƒˆ
    â””â”€â”€ e2e/           # E2Eãƒ†ã‚¹ãƒˆ
```

### é–¢æ•°å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

- **ç´”ç²‹é–¢æ•°**: å‰¯ä½œç”¨ã®ãªã„é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°
- **æ©Ÿèƒ½å˜ä½åˆ†é›¢**: `src/features/`é…ä¸‹ã§å®Œçµ
- **ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢**: UIå±¤ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤ã€ãƒ‡ãƒ¼ã‚¿å±¤ã®æ˜ç¢ºãªåˆ†é›¢

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Node.js 18+ ã¾ãŸã¯ Bun
- PostgreSQL (Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¨å¥¨)
- OpenAI APIã‚­ãƒ¼

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. **ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³**
```bash
git clone [repository-url]
cd meal-finder
```

2. **ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
npm install
# ã¾ãŸã¯
bun install
```

3. **ç’°å¢ƒå¤‰æ•°è¨­å®š**
```bash
cp .env.example .env.local
```

ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š:
```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# OpenAI
OPENAI_API_KEY=your_openai_api_key

# Database
DATABASE_URL=your_postgresql_connection_string
```

4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
```bash
npx prisma migrate dev
npx prisma generate
```

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
npm run dev
# ã¾ãŸã¯
bun dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ [http://localhost:3000](http://localhost:3000) ã‚’é–‹ã„ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
npm test
# ã¾ãŸã¯
bun test
```

### ãƒ†ã‚¹ãƒˆç¨®åˆ¥
- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: `src/__tests__/unit/`
- **å¥‘ç´„ãƒ†ã‚¹ãƒˆ**: `src/__tests__/contract/`
- **E2Eãƒ†ã‚¹ãƒˆ**: `tests/e2e/`
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: `tests/performance/`

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
```bash
npm run test:coverage
```

## APIä»•æ§˜

### ä¸»è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### è³ªå•ç”Ÿæˆ
```
POST /api/ai/generate-question
Content-Type: application/json

{
  "sessionId": "uuid",
  "userProfile": { ... },
  "previousAnswers": [...],
  "timeOfDay": "MORNING|NOON|EVENING"
}
```

#### é£Ÿäº‹æ¨è–¦ç”Ÿæˆ
```
POST /api/ai/generate-recommendation
Content-Type: application/json

{
  "sessionId": "uuid",
  "userProfile": { ... },
  "answers": [...],
  "timeOfDay": "MORNING|NOON|EVENING"
}
```

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
```
POST /api/sessions
GET /api/sessions/{sessionId}
GET /api/sessions/{sessionId}/questions/next
POST /api/sessions/{sessionId}/answers
```

è©³ç´°ãªAPIä»•æ§˜ã¯ `specs/001-/contracts/api-spec.yaml` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### ä¸»è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

- **UserProfile**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆå¥½ã¿ã€ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã€äºˆç®—ç­‰ï¼‰
- **QuestionSession**: è³ªå•ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **Answer**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ãƒ‡ãƒ¼ã‚¿
- **MealRecommendation**: AIç”Ÿæˆã®é£Ÿäº‹æ¨è–¦
- **MealHistory**: é£Ÿäº‹å±¥æ­´ã¨è©•ä¾¡

å®Œå…¨ãªã‚¹ã‚­ãƒ¼ãƒã¯ `prisma/schema.prisma` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

- **APIãƒ¬ã‚¹ãƒãƒ³ã‚¹**: < 2ç§’
- **Lighthouse ã‚¹ã‚³ã‚¢**: 90+
- **ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º**: < 500KB
- **åŒæ™‚æ¥ç¶š**: 100ãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œ

## é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- **é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°**: classãƒ™ãƒ¼ã‚¹ã§ãªãç´”ç²‹é–¢æ•°ã‚’ä½¿ç”¨
- **TypeScript strict**: å³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯
- **ESLint/Prettier**: ã‚³ãƒ¼ãƒ‰å“è³ªä¿æŒ

### ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º (TDD)
1. å¥‘ç´„ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆAPIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰
2. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
3. å®Ÿè£…
4. çµ±åˆãƒ†ã‚¹ãƒˆ
5. E2Eãƒ†ã‚¹ãƒˆ

### Git ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- **main**: æœ¬ç•ªç’°å¢ƒ
- **develop**: é–‹ç™ºç’°å¢ƒ
- **feature/***: æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒ

## ãƒ‡ãƒ—ãƒ­ã‚¤

### Vercel (æ¨å¥¨)
```bash
npm run build
vercel --prod
```

### ç’°å¢ƒå¤‰æ•°è¨­å®š
æœ¬ç•ªç’°å¢ƒã§ã‚‚åŒæ§˜ã®ç’°å¢ƒå¤‰æ•°è¨­å®šãŒå¿…è¦ã§ã™ã€‚

## è²¢çŒ®

1. Issueä½œæˆï¼ˆãƒã‚°å ±å‘Šãƒ»æ©Ÿèƒ½è¦æ±‚ï¼‰
2. Fork & ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
3. å¤‰æ›´å®Ÿè£…ï¼ˆTDDå®Ÿè·µï¼‰
4. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»åˆæ ¼ç¢ºèª
5. Pull Requestä½œæˆ

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ã‚µãƒãƒ¼ãƒˆ

- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: `specs/001-/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- **Issueå ±å‘Š**: GitHub Issues
- **æŠ€è¡“ä»•æ§˜**: `specs/001-/data-model.md`, `contracts/api-spec.yaml`

---

## é–‹ç™ºã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

âœ… **Phase 3.1-3.3**: ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»Contract Testsãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ  
âœ… **Phase 3.4-3.5**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»API Routes  
âœ… **Phase 3.6-3.7**: çµ±åˆãƒ†ã‚¹ãƒˆãƒ»React Components  
âœ… **Phase 3.8**: Next.js Pages & Layout  
âœ… **Phase 3.9**: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãƒ»E2Eãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

**ç¾åœ¨**: ã™ã¹ã¦ã®åŸºæœ¬æ©Ÿèƒ½å®Ÿè£…å®Œäº†ã€æœ¬æ ¼é‹ç”¨æº–å‚™å®Œäº†